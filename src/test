private runCollisionCheckAndPan(markerPoint: google.maps.Point) {
  if (this.isPanning) return;

  const mapDiv = this.map.getDiv() as HTMLElement;
  const mapRect = mapDiv.getBoundingClientRect();
  const overlayRect = this.container.getBoundingClientRect();

  const padding = 12;
  const topInset = 120;

  const safeTop = mapRect.top + topInset + padding;
  const safeLeft = mapRect.left + padding;
  const safeRight = mapRect.right - padding;
  const safeBottom = mapRect.bottom - padding;

  const outsideTop = overlayRect.top < safeTop;
  const outsideLeft = overlayRect.left < safeLeft;
  const outsideRight = overlayRect.right > safeRight;
  const outsideBottom = overlayRect.bottom > safeBottom;

  const hasCollision = outsideTop || outsideLeft || outsideRight || outsideBottom;
  if (!hasCollision) return;

  this.didPanForKey = this.keyForPos(this.position);
  this.isPanning = true;

  // âœ… KEY FIX: Account for overlay size when choosing the target
  // The overlay extends DOWN and RIGHT from the marker,
  // so the marker needs to be HIGH and LEFT enough for the card to fit

  const overlayWidth = overlayRect.width;
  const overlayHeight = overlayRect.height;

  // Target: position the marker so the ENTIRE card fits inside the map
  // Marker goes to upper-left area, leaving room for the card below/right
  const targetX = (mapRect.width - overlayWidth) / 2;   // center the CARD, not the marker
  const targetY = topInset + padding + 20;               // just below the safe top

  const dx = markerPoint.x - targetX;
  const dy = markerPoint.y - targetY;

  if (Math.abs(dx) < 8 && Math.abs(dy) < 8) {
    this.isPanning = false;
    return;
  }

  this.map.panBy(dx, dy);

  google.maps.event.addListenerOnce(this.map, "idle", () => {
    this.isPanning = false;
  });
}
```

## What Changed and Why
```
BEFORE:
  Target = lower-middle (50%, 72%)
  Problem = card extends below marker, falls off screen

  Map visible area:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                     â”‚
  â”‚                     â”‚
  â”‚                     â”‚
  â”‚          ğŸ“Œ â† marker lands here (72% down)
  â”‚           â”Œâ”€â”€Cardâ”€â”€â”â”‚
  â”‚           â”‚        â”‚â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â† card overflows!
                        â”‚

AFTER:
  Target = upper area, offset by card size
  Result = card has room to expand

  Map visible area:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  header/search      â”‚
  â”‚     ğŸ“Œ â† marker lands here (below header)
  â”‚      â”Œâ”€â”€Cardâ”€â”€â”     â”‚
  â”‚      â”‚        â”‚     â”‚
  â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â† fits! âœ…
  â”‚                     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
